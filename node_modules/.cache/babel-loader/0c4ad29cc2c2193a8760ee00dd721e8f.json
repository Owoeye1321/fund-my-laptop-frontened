{"ast":null,"code":"import _asyncToGenerator from\"/Users/user/Desktop/desktop/FundMyLaptop/fund-my-laptop-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/user/Desktop/desktop/FundMyLaptop/fund-my-laptop-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/user/Desktop/desktop/FundMyLaptop/fund-my-laptop-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/user/Desktop/desktop/FundMyLaptop/fund-my-laptop-frontend/node_modules/@babel/runtime/regenerator/index.js\";import'bootstrap/dist/css/bootstrap.min.css';import{useState,useEffect}from'react';import axios from'axios';import{motion}from'framer-motion/dist/framer-motion';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({username:'',password:''}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var handle=function handle(e){var newData=_objectSpread({},data);newData[e.target.id]=e.target.value;setData(newData);};var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return axios.post('/api/auth/login',{data:data});case 3:response=_context.sent;if(!response.data)setError('Unable to process data');if(response.data.message==='success'){localStorage.setItem('accessToken',response.data.accessToken);localStorage.setItem('refreshToken',response.data.refreshToken);window.location.assign('http://localhost:3000/dashboard');}else{setError(response.data.message);}case 6:case\"end\":return _context.stop();}}},_callee);}));return function submit(_x){return _ref.apply(this,arguments);};}();useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,check;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem('accessToken');if(!token)console.log('Unable to get token');_context2.next=4;return axios.get('/api/read/profile',{headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}});case 4:check=_context2.sent;if(check.data.message!=='unauthorized')window.location.assign('http://localhost:3000/dashboard');case 6:case\"end\":return _context2.stop();}}},_callee2);})),[]);return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-3 col-lg-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-12 col-md-6 col-lg-4\",style:{padding:'150px 50px 50px 50px'},children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return submit(e);},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handle(e);},type:\"text\",id:\"username\",className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handle(e);},type:\"password\",id:\"password\",className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'10px',marginBottom:'0px'},children:/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"i\",{style:{marginBottom:'-1px',color:'red'},children:error})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"clearfix mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"float-left\",children:/*#__PURE__*/_jsxs(\"i\",{style:{fontSize:'13px'},children:[\"No account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/signup\",children:\"Sign Up\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"float-right\",children:/*#__PURE__*/_jsx(\"a\",{style:{fontSize:'13px'},id:\"forgot\",href:\"/forgetpassword\",children:\"Forgot Password?\"})})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"form-control success mb-3\"})]}),/*#__PURE__*/_jsx(\"center\",{children:\"\\xA9 2021 FUND MY LAPTOP - All Rights Reserved.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-3 col-lg-4\"})]})});}export default Login;","map":{"version":3,"names":["useState","useEffect","axios","motion","Login","error","setError","username","password","data","setData","handle","e","newData","target","id","value","submit","preventDefault","post","response","message","localStorage","setItem","accessToken","refreshToken","window","location","assign","token","getItem","console","log","get","headers","Authorization","check","opacity","padding","fontSize","marginBottom","color"],"sources":["/Users/user/Desktop/desktop/FundMyLaptop/fund-my-laptop-frontend/src/components/login.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css'\nimport { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { motion } from 'framer-motion/dist/framer-motion'\n\nfunction Login() {\n  const [error, setError] = useState('')\n  const [data, setData] = useState({\n    username: '',\n    password: '',\n  })\n  const handle = (e) => {\n    const newData = { ...data }\n    newData[e.target.id] = e.target.value\n    setData(newData)\n  }\n\n  const submit = async (e) => {\n    e.preventDefault()\n    const response = await axios.post('/api/auth/login', { data })\n    if (!response.data) setError('Unable to process data')\n    if (response.data.message === 'success') {\n      localStorage.setItem('accessToken', response.data.accessToken)\n      localStorage.setItem('refreshToken', response.data.refreshToken)\n      window.location.assign('http://localhost:3000/dashboard')\n    } else {\n      setError(response.data.message)\n    }\n  }\n  useEffect(async () => {\n    const token = localStorage.getItem('accessToken')\n    if (!token) console.log('Unable to get token')\n    const check = await axios.get('/api/read/profile', {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n    })\n    if (check.data.message !== 'unauthorized')\n      window.location.assign('http://localhost:3000/dashboard')\n  }, [])\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n    >\n      <div className=\"row\">\n        <div className=\"col-sm-12 col-md-3 col-lg-4\"></div>\n        <div\n          className=\"col-sm-12 col-md-6 col-lg-4\"\n          style={{ padding: '150px 50px 50px 50px' }}\n        >\n          <h4 className=\"mb-3\">Login</h4>\n          <form onSubmit={(e) => submit(e)}>\n            <div className=\"form-group\">\n              <label>Username</label>\n              <input\n                onChange={(e) => handle(e)}\n                type=\"text\"\n                id=\"username\"\n                className=\"form-control\"\n              />\n            </div>\n            <div className=\"form-group\">\n              <label>Password</label>\n              <input\n                onChange={(e) => handle(e)}\n                type=\"password\"\n                id=\"password\"\n                className=\"form-control\"\n              />\n            </div>\n            <div style={{ fontSize: '10px', marginBottom: '0px' }}>\n              <center>\n                <i style={{ marginBottom: '-1px', color: 'red' }}>{error}</i>\n              </center>\n            </div>\n            <div className=\"clearfix mb-3\">\n              <div className=\"float-left\">\n                <i style={{ fontSize: '13px' }}>\n                  No account? <a href=\"/signup\">Sign Up</a>\n                </i>\n              </div>\n              <div className=\"float-right\">\n                <a\n                  style={{ fontSize: '13px' }}\n                  id=\"forgot\"\n                  href=\"/forgetpassword\"\n                >\n                  Forgot Password?\n                </a>\n              </div>\n            </div>\n            <input type=\"submit\" className=\"form-control success mb-3\" />\n          </form>\n\n          <center>Â© 2021 FUND MY LAPTOP - All Rights Reserved.</center>\n        </div>\n\n        <div className=\"col-sm-12 col-md-3 col-lg-4\"></div>\n      </div>\n    </motion.div>\n  )\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}